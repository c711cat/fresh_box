"use strict";(self["webpackChunkfresh_box"]=self["webpackChunkfresh_box"]||[]).push([[12],{3649:function(e,t,l){l.d(t,{A:function(){return pe}});var o=l(6768),s=l(4232);const c=e=>((0,o.Qi)("data-v-98e99eee"),e=e(),(0,o.jt)(),e),r={class:"row m-0 p-0"},d={class:"px-4 detailsText mb-4 col-lg-7"},i={class:"d-flex align-items-center justify-content-between flex-wrap"},a=c((()=>(0,o.Lk)("h3",{class:"orderTitle"},"訂單明細",-1))),n={class:"orderId mb-0"},p={class:"d-inline-block"},u={class:"orderId mb-0"},m={class:"d-inline-block"},x=["srcset"],h={class:"row mx-0 my-1 px-0 col-9 col-sm-10 align-items-center flex-wrap"},b={class:"col-12"},k={class:"col-12 col-md-4 col-xl-12 col-xxl-3"},f={class:"text-secondary col-12 col-md-3 col-xl-4 col-xxl-3"},g={class:"col-auto col-sm-6 col-md-2 col-xl-4 col-xxl-2 d-inline-block"},v={class:"col-auto ms-auto col-sm-6 col-md-3 col-xl-4 col-xxl-4 fw-bold text-end d-inline-block"},L={class:"col-12 row g-1 m-0 border-top py-3 justify-content-between align-items-center space"},y={class:"d-flex flex-wrap col-12"},w=c((()=>(0,o.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end fw-bold"}," 小計 ",-1))),_={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end fw-bold"},$={key:0,class:"d-flex col-12"},O=c((()=>(0,o.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 優惠碼折抵 ",-1))),F={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"},C={key:1,class:"d-flex col-12"},D=c((()=>(0,o.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 折抵後小計 ",-1))),S={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"},A={class:"d-flex flex-wrap col-12"},T=c((()=>(0,o.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 冷藏宅配 ",-1))),E={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"},X=c((()=>(0,o.Lk)("div",{class:"d-flex text-primary col-12 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9"},[(0,o.Lk)("p",{class:"mb-0 w-100 text-sm-end"},[(0,o.Lk)("i",{class:"bi bi-info-circle me-1"}),(0,o.eW)("滿 NT$ 1,000 免運 ")])],-1))),j={class:"d-flex col-12"},N=c((()=>(0,o.Lk)("strong",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 付款金額 ",-1))),I={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end text-primary"},P={class:"d-flex col-12"},W=c((()=>(0,o.Lk)("strong",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 付款狀態 ",-1))),M={class:"px-4 col-lg-5"},Q=c((()=>(0,o.Lk)("h3",{class:"border-bottom pb-2"},"收件人資訊",-1))),B={class:"px-4 mb-2 d-flex flex-wrap"},V=c((()=>(0,o.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"姓名",-1))),q={class:"mb-0 py-1 col-sm-10 col-12"},K={class:"px-4 mb-2 d-flex flex-wrap align-items-center"},U=c((()=>(0,o.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"email",-1))),z={class:"wrapText mb-0 py-1 col-sm-10 col-12 d-flex flex-wrap align-items-center"},G={class:"mb-0 pe-3 overflow-hidden"},H=["href"],J={class:"px-4 mb-2 d-flex flex-wrap align-items-center"},R=c((()=>(0,o.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"電話",-1))),Y={class:"py-1 col-sm-10 col-12 d-flex align-items-center"},Z={class:"mb-0 pe-3"},ee=["href"],te={class:"px-4 mb-2 d-flex flex-wrap"},le=c((()=>(0,o.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"地址",-1))),oe={class:"mb-0 py-1 col-sm-10 col-12"},se={class:"px-4 mb-2 d-flex flex-wrap"},ce=c((()=>(0,o.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"備註",-1))),re={class:"mb-0 py-1 col-sm-10 col-12"};function de(e,t,l,c,de,ie){const ae=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("section",d,[(0,o.Lk)("header",i,[a,(0,o.Lk)("div",null,[(0,o.Lk)("p",n,[(0,o.eW)(" 訂單日期 "),(0,o.Lk)("span",p,(0,s.v_)(ie.turnDate(de.order.create_at)),1)]),(0,o.Lk)("p",u,[(0,o.eW)(" 訂單編號 "),(0,o.Lk)("span",m,(0,s.v_)(de.order.id),1)])])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(de.order.products,(t=>((0,o.uX)(),(0,o.CE)("section",{key:t.id,class:"row m-0 justify-content-around align-items-center border-top pt-3 pb-3"},[(0,o.bF)(ae,{to:`/product/${t.product.id}`,class:"col-auto m-0 text-center p-0"},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"imgBody",srcset:`${t.product.imageUrl}&w=260`,alt:"product-img"},null,8,x)])),_:2},1032,["to"]),(0,o.Lk)("div",h,[(0,o.Lk)("div",b,[(0,o.bF)(ae,{to:`/product/${t.product.id}`,class:"titleLink"},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(t.product.title),1)])),_:2},1032,["to"])]),(0,o.Lk)("div",k,(0,s.v_)(t.product.content)+"／"+(0,s.v_)(t.product.unit),1),(0,o.Lk)("div",f," NT$ "+(0,s.v_)(e.$filters.currency(ie.showPrice(t))),1),(0,o.Lk)("div",g,(0,s.v_)(t.qty)+" 件 ",1),(0,o.Lk)("div",v," NT$ "+(0,s.v_)(e.$filters.currency(t.total)),1)])])))),128)),(0,o.Lk)("section",L,[(0,o.Lk)("div",y,[w,(0,o.Lk)("div",_," NT$ "+(0,s.v_)(e.$filters.currency(de.order.subtotal)),1)]),de.order.discount>0?((0,o.uX)(),(0,o.CE)("div",$,[O,(0,o.Lk)("div",F," - NT$ "+(0,s.v_)(e.$filters.currency(de.order.discount)),1)])):(0,o.Q3)("",!0),de.order.discount>0?((0,o.uX)(),(0,o.CE)("div",C,[D,(0,o.Lk)("div",S," NT$ "+(0,s.v_)(e.$filters.currency(de.order.afterDiscount)),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",A,[T,(0,o.Lk)("div",E," NT$ "+(0,s.v_)(de.order.shippingFee),1),X]),(0,o.Lk)("div",j,[N,(0,o.Lk)("strong",I," NT$ "+(0,s.v_)(e.$filters.currency(de.order.paymentAmount)),1)]),(0,o.Lk)("div",P,[W,(0,o.Lk)("strong",{class:(0,s.C4)([ie.paymentStatusColor,"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"])},(0,s.v_)(ie.paymentStatus),3)])])]),(0,o.Lk)("section",M,[Q,(0,o.Lk)("div",B,[V,(0,o.Lk)("p",q,(0,s.v_)(de.order.user.name),1)]),(0,o.Lk)("div",K,[U,(0,o.Lk)("div",z,[(0,o.Lk)("p",G,(0,s.v_)(de.order.user.email),1),(0,o.Lk)("a",{href:`mailto:${de.order.user.email}`,class:"tel_and_mail_link text-decoration-none text-primary bi bi-envelope-arrow-up fs-5"},null,8,H)])]),(0,o.Lk)("div",J,[R,(0,o.Lk)("div",Y,[(0,o.Lk)("p",Z,(0,s.v_)(de.order.user.tel),1),(0,o.Lk)("a",{href:`tel:${de.order.user.tel}`,class:"tel_and_mail_link text-decoration-none text-primary bi bi-telephone-forward fs-5"},null,8,ee)])]),(0,o.Lk)("div",te,[le,(0,o.Lk)("p",oe,(0,s.v_)(de.order.user.address),1)]),(0,o.Lk)("div",se,[ce,(0,o.Lk)("p",re,(0,s.v_)(de.order.message),1)])])])}var ie={data(){return{order:{products:{},subtotal:0,discount:0,afterDiscount:0,paymentAmount:0,shippingFee:290,user:{}}}},props:{oneOrder:{},transOrder:{}},watch:{transOrder(){this.order={...this.transOrder},this.getSubtotal()},oneOrder(){this.order={...this.oneOrder},this.getSubtotal()}},methods:{getOrder(){this.oneOrder&&(this.order={...this.oneOrder},this.order.user={...this.oneOrder.user},this.order.products={...this.oneOrder.products},this.getSubtotal())},getSubtotal(){let e=0;Object.values(this.order.products).forEach((t=>{e+=t.total})),this.order.subtotal=e,this.getAfterDiscount()},getAfterDiscount(){this.order.afterDiscount=Math.round(this.order.total),this.getDiscount(),this.getShippingFee(),this.getPaymentAmount(),this.getShippingFee()},getDiscount(){this.order.discount=this.order.subtotal-this.order.afterDiscount},getShippingFee(){this.order.total>=1e3&&(this.order.shippingFee=0),this.order.total<1e3&&(this.order.shippingFee=290)},getPaymentAmount(){this.order.paymentAmount=this.order.afterDiscount+this.order.shippingFee},turnDate(e){return new Date(1e3*e).toLocaleString("taiwan",{hour12:!1})},showPrice(e){return e.product.origin_price===e.product.price?e.product.origin_price:e.product.price}},computed:{paymentStatus(){return!0===this.order.is_paid?"付款完成":"未付款"},paymentStatusColor(){return!0===this.order.is_paid?"text-success":"text-danger"}},created(){this.getOrder()}},ae=l(1241);const ne=(0,ae.A)(ie,[["render",de],["__scopeId","data-v-98e99eee"]]);var pe=ne},8012:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});var o=l(6768);const s=e=>((0,o.Qi)("data-v-f6ecf4e6"),e=e(),(0,o.jt)(),e),c={key:1,class:"mt-5 pt-4 mb-5"},r={class:"d-flex justify-content-center col-12 mt-4 mb-3 py-3"},d={class:"col-11 col-sm-11 col-md-10 col-lg-11 col-xl-10 col-xxl-11 px-4"},i={class:"mx-2 mx-auto col-11 col-sm-11 col-md-10 col-lg-11 col-xl-10 col-xxl-11"},a={class:"col-12 col-lg-5 px-4 ms-auto"},n={key:0,class:"col-12 d-flex flex-wrap justify-content-between"},p=s((()=>(0,o.Lk)("button",{type:"button",class:"w-100 btnBody btn btn-outline-primary"}," 查看訂單 ",-1))),u=s((()=>(0,o.Lk)("button",{type:"button",class:"w-100 btnBody btn btn-primary"}," 繼續逛逛 ",-1))),m={key:1},x=["disabled"];function h(e,t,l,s,h,b){const k=(0,o.g2)("LoadingView"),f=(0,o.g2)("router-view"),g=(0,o.g2)("OrderView"),v=(0,o.g2)("router-link");return h.isLoading?((0,o.uX)(),(0,o.Wv)(k,{key:0})):((0,o.uX)(),(0,o.CE)("main",c,[(0,o.Lk)("div",r,[(0,o.Lk)("div",d,[(0,o.bF)(f)])]),(0,o.Lk)("section",i,[(0,o.bF)(g,{class:"pt-2 mb-3",transOrder:h.order},null,8,["transOrder"]),(0,o.Lk)("section",a,[h.order.is_paid?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(v,{to:"/order-list",class:"border-0 col p-1"},{default:(0,o.k6)((()=>[p])),_:1}),(0,o.bF)(v,{to:"/user-products",class:"border-0 col p-1"},{default:(0,o.k6)((()=>[u])),_:1})])):((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>b.toPay&&b.toPay(...e)),disabled:h.isLoading,type:"button",class:"btn btn-primary w-100"}," 確認付款 ",8,x)]))])])]))}var b=l(3649),k={data(){return{order:{},isLoading:!1}},components:{OrderView:b.A},methods:{getOrder(){const e=this.$route.params.orderId||this.OrderId,t=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/order/${e}`;this.$http.get(t).then((e=>{this.order=e.data.order})).catch((e=>{this.$pushMsg.status404(e.response,"取得訂單資料失敗")}))},toPay(){const e=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/pay/${this.order.id}`;this.isLoading=!0,this.$http.post(e).then((()=>{this.$pushMsg.status200("付款成功"),this.getOrder()})).catch((e=>{this.$pushMsg.status404(e.response,"付款失敗")})).finally((()=>{this.isLoading=!1}))}},created(){this.getOrder()}},f=l(1241);const g=(0,f.A)(k,[["render",h],["__scopeId","data-v-f6ecf4e6"]]);var v=g}}]);
//# sourceMappingURL=12.61f09468.js.map