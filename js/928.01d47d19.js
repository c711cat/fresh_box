(self["webpackChunkfresh_box"]=self["webpackChunkfresh_box"]||[]).push([[928],{2896:function(e,t,s){s(4114),
/*!
  * Bootstrap collapse.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(t,l){e.exports=l(s(6e3),s(1617),s(4822),s(1752))}(0,(function(e,t,s,l){"use strict";const o="collapse",i="bs.collapse",r=`.${i}`,n=".data-api",c=`show${r}`,a=`shown${r}`,d=`hide${r}`,p=`hidden${r}`,u=`click${r}${n}`,h="show",g="collapse",m="collapsing",f="collapsed",x=`:scope .${g} .${g}`,_="collapse-horizontal",k="width",L="height",b=".collapse.show, .collapse.collapsing",v='[data-bs-toggle="collapse"]',y={parent:null,toggle:!0},w={parent:"(null|element)",toggle:"boolean"};class C extends e{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const l=s.find(v);for(const o of l){const e=s.getSelectorFromElement(o),t=s.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return y}static get DefaultType(){return w}static get NAME(){return o}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(b).filter((e=>e!==this._element)).map((e=>C.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;const s=t.trigger(this._element,c);if(s.defaultPrevented)return;for(const t of e)t.hide();const l=this._getDimension();this._element.classList.remove(g),this._element.classList.add(m),this._element.style[l]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(m),this._element.classList.add(g,h),this._element.style[l]="",t.trigger(this._element,a)},i=l[0].toUpperCase()+l.slice(1),r=`scroll${i}`;this._queueCallback(o,this._element,!0),this._element.style[l]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const e=t.trigger(this._element,d);if(e.defaultPrevented)return;const o=this._getDimension();this._element.style[o]=`${this._element.getBoundingClientRect()[o]}px`,l.reflow(this._element),this._element.classList.add(m),this._element.classList.remove(g,h);for(const t of this._triggerArray){const e=s.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(m),this._element.classList.add(g),t.trigger(this._element,p)};this._element.style[o]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(h)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=l.getElement(e.parent),e}_getDimension(){return this._element.classList.contains(_)?k:L}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(v);for(const t of e){const e=s.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=s.find(x,this._config.parent);return s.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const s of e)s.classList.toggle(f,!t),s.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"===typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const s=C.getOrCreateInstance(this,t);if("string"===typeof e){if("undefined"===typeof s[e])throw new TypeError(`No method named "${e}"`);s[e]()}}))}}return t.on(document,u,v,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of s.getMultipleElementsFromSelector(this))C.getOrCreateInstance(t,{toggle:!1}).toggle()})),l.defineJQueryPlugin(C),C}))},3649:function(e,t,s){"use strict";s.d(t,{A:function(){return pe}});var l=s(6768),o=s(4232);const i=e=>((0,l.Qi)("data-v-98e99eee"),e=e(),(0,l.jt)(),e),r={class:"row m-0 p-0"},n={class:"px-4 detailsText mb-4 col-lg-7"},c={class:"d-flex align-items-center justify-content-between flex-wrap"},a=i((()=>(0,l.Lk)("h3",{class:"orderTitle"},"訂單明細",-1))),d={class:"orderId mb-0"},p={class:"d-inline-block"},u={class:"orderId mb-0"},h={class:"d-inline-block"},g=["srcset"],m={class:"row mx-0 my-1 px-0 col-9 col-sm-10 align-items-center flex-wrap"},f={class:"col-12"},x={class:"col-12 col-md-4 col-xl-12 col-xxl-3"},_={class:"text-secondary col-12 col-md-3 col-xl-4 col-xxl-3"},k={class:"col-auto col-sm-6 col-md-2 col-xl-4 col-xxl-2 d-inline-block"},L={class:"col-auto ms-auto col-sm-6 col-md-3 col-xl-4 col-xxl-4 fw-bold text-end d-inline-block"},b={class:"col-12 row g-1 m-0 border-top py-3 justify-content-between align-items-center space"},v={class:"d-flex flex-wrap col-12"},y=i((()=>(0,l.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end fw-bold"}," 小計 ",-1))),w={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end fw-bold"},C={key:0,class:"d-flex col-12"},$=i((()=>(0,l.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 優惠碼折抵 ",-1))),A={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"},S={key:1,class:"d-flex col-12"},O=i((()=>(0,l.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 折抵後小計 ",-1))),T={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"},E={class:"d-flex flex-wrap col-12"},P=i((()=>(0,l.Lk)("div",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 冷藏宅配 ",-1))),D={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"},F=i((()=>(0,l.Lk)("div",{class:"d-flex text-primary col-12 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9"},[(0,l.Lk)("p",{class:"mb-0 w-100 text-sm-end"},[(0,l.Lk)("i",{class:"bi bi-info-circle me-1"}),(0,l.eW)("滿 NT$ 1,000 免運 ")])],-1))),X={class:"d-flex col-12"},N=i((()=>(0,l.Lk)("strong",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 付款金額 ",-1))),I={class:"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end text-primary"},j={class:"d-flex col-12"},Q=i((()=>(0,l.Lk)("strong",{class:"col-4 col-sm-9 col-md-10 col-lg-9 col-xl-9 col-xxl-9 text-sm-end"}," 付款狀態 ",-1))),M={class:"px-4 col-lg-5"},R=i((()=>(0,l.Lk)("h3",{class:"border-bottom pb-2"},"收件人資訊",-1))),W={class:"px-4 mb-2 d-flex flex-wrap"},V=i((()=>(0,l.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"姓名",-1))),q={class:"mb-0 py-1 col-sm-10 col-12"},z={class:"px-4 mb-2 d-flex flex-wrap align-items-center"},B=i((()=>(0,l.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"email",-1))),K={class:"wrapText mb-0 py-1 col-sm-10 col-12 d-flex flex-wrap align-items-center"},U={class:"mb-0 pe-3 overflow-hidden"},J=["href"],G={class:"px-4 mb-2 d-flex flex-wrap align-items-center"},H=i((()=>(0,l.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"電話",-1))),Y={class:"py-1 col-sm-10 col-12 d-flex align-items-center"},Z={class:"mb-0 pe-3"},ee=["href"],te={class:"px-4 mb-2 d-flex flex-wrap"},se=i((()=>(0,l.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"地址",-1))),le={class:"mb-0 py-1 col-sm-10 col-12"},oe={class:"px-4 mb-2 d-flex flex-wrap"},ie=i((()=>(0,l.Lk)("p",{class:"mb-0 py-1 fw-bold col-sm-2 col-12"},"備註",-1))),re={class:"mb-0 py-1 col-sm-10 col-12"};function ne(e,t,s,i,ne,ce){const ae=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("section",n,[(0,l.Lk)("header",c,[a,(0,l.Lk)("div",null,[(0,l.Lk)("p",d,[(0,l.eW)(" 訂單日期 "),(0,l.Lk)("span",p,(0,o.v_)(ce.turnDate(ne.order.create_at)),1)]),(0,l.Lk)("p",u,[(0,l.eW)(" 訂單編號 "),(0,l.Lk)("span",h,(0,o.v_)(ne.order.id),1)])])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ne.order.products,(t=>((0,l.uX)(),(0,l.CE)("section",{key:t.id,class:"row m-0 justify-content-around align-items-center border-top pt-3 pb-3"},[(0,l.bF)(ae,{to:`/product/${t.product.id}`,class:"col-auto m-0 text-center p-0"},{default:(0,l.k6)((()=>[(0,l.Lk)("img",{class:"imgBody",srcset:`${t.product.imageUrl}&w=260`,alt:"product-img"},null,8,g)])),_:2},1032,["to"]),(0,l.Lk)("div",m,[(0,l.Lk)("div",f,[(0,l.bF)(ae,{to:`/product/${t.product.id}`,class:"titleLink"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(t.product.title),1)])),_:2},1032,["to"])]),(0,l.Lk)("div",x,(0,o.v_)(t.product.content)+"／"+(0,o.v_)(t.product.unit),1),(0,l.Lk)("div",_," NT$ "+(0,o.v_)(e.$filters.currency(ce.showPrice(t))),1),(0,l.Lk)("div",k,(0,o.v_)(t.qty)+" 件 ",1),(0,l.Lk)("div",L," NT$ "+(0,o.v_)(e.$filters.currency(t.total)),1)])])))),128)),(0,l.Lk)("section",b,[(0,l.Lk)("div",v,[y,(0,l.Lk)("div",w," NT$ "+(0,o.v_)(e.$filters.currency(ne.order.subtotal)),1)]),ne.order.discount>0?((0,l.uX)(),(0,l.CE)("div",C,[$,(0,l.Lk)("div",A," - NT$ "+(0,o.v_)(e.$filters.currency(ne.order.discount)),1)])):(0,l.Q3)("",!0),ne.order.discount>0?((0,l.uX)(),(0,l.CE)("div",S,[O,(0,l.Lk)("div",T," NT$ "+(0,o.v_)(e.$filters.currency(ne.order.afterDiscount)),1)])):(0,l.Q3)("",!0),(0,l.Lk)("div",E,[P,(0,l.Lk)("div",D," NT$ "+(0,o.v_)(ne.order.shippingFee),1),F]),(0,l.Lk)("div",X,[N,(0,l.Lk)("strong",I," NT$ "+(0,o.v_)(e.$filters.currency(ne.order.paymentAmount)),1)]),(0,l.Lk)("div",j,[Q,(0,l.Lk)("strong",{class:(0,o.C4)([ce.paymentStatusColor,"col-8 col-sm-3 col-md-2 col-lg-3 col-xl-3 col-xxl-3 text-end"])},(0,o.v_)(ce.paymentStatus),3)])])]),(0,l.Lk)("section",M,[R,(0,l.Lk)("div",W,[V,(0,l.Lk)("p",q,(0,o.v_)(ne.order.user.name),1)]),(0,l.Lk)("div",z,[B,(0,l.Lk)("div",K,[(0,l.Lk)("p",U,(0,o.v_)(ne.order.user.email),1),(0,l.Lk)("a",{href:`mailto:${ne.order.user.email}`,class:"tel_and_mail_link text-decoration-none text-primary bi bi-envelope-arrow-up fs-5"},null,8,J)])]),(0,l.Lk)("div",G,[H,(0,l.Lk)("div",Y,[(0,l.Lk)("p",Z,(0,o.v_)(ne.order.user.tel),1),(0,l.Lk)("a",{href:`tel:${ne.order.user.tel}`,class:"tel_and_mail_link text-decoration-none text-primary bi bi-telephone-forward fs-5"},null,8,ee)])]),(0,l.Lk)("div",te,[se,(0,l.Lk)("p",le,(0,o.v_)(ne.order.user.address),1)]),(0,l.Lk)("div",oe,[ie,(0,l.Lk)("p",re,(0,o.v_)(ne.order.message),1)])])])}var ce={data(){return{order:{products:{},subtotal:0,discount:0,afterDiscount:0,paymentAmount:0,shippingFee:290,user:{}}}},props:{oneOrder:{},transOrder:{}},watch:{transOrder(){this.order={...this.transOrder},this.getSubtotal()},oneOrder(){this.order={...this.oneOrder},this.getSubtotal()}},methods:{getOrder(){this.oneOrder&&(this.order={...this.oneOrder},this.order.user={...this.oneOrder.user},this.order.products={...this.oneOrder.products},this.getSubtotal())},getSubtotal(){let e=0;Object.values(this.order.products).forEach((t=>{e+=t.total})),this.order.subtotal=e,this.getAfterDiscount()},getAfterDiscount(){this.order.afterDiscount=Math.round(this.order.total),this.getDiscount(),this.getShippingFee(),this.getPaymentAmount(),this.getShippingFee()},getDiscount(){this.order.discount=this.order.subtotal-this.order.afterDiscount},getShippingFee(){this.order.total>=1e3&&(this.order.shippingFee=0),this.order.total<1e3&&(this.order.shippingFee=290)},getPaymentAmount(){this.order.paymentAmount=this.order.afterDiscount+this.order.shippingFee},turnDate(e){return new Date(1e3*e).toLocaleString("taiwan",{hour12:!1})},showPrice(e){return e.product.origin_price===e.product.price?e.product.origin_price:e.product.price}},computed:{paymentStatus(){return!0===this.order.is_paid?"付款完成":"未付款"},paymentStatusColor(){return!0===this.order.is_paid?"text-success":"text-danger"}},created(){this.getOrder()}},ae=s(1241);const de=(0,ae.A)(ce,[["render",ne],["__scopeId","data-v-98e99eee"]]);var pe=de},291:function(e,t,s){"use strict";s.d(t,{A:function(){return m}});var l=s(6768),o=s(5130),i=s(4232);const r={class:"pt-3","aria-label":"Page navigation"},n={class:"pagination my-3 justify-content-center"},c={class:"page-item"},a=["onClick"],d={class:"page-item"};function p(e,t,s,p,u,h){return(0,l.uX)(),(0,l.CE)("nav",r,[(0,l.Lk)("ul",n,[(0,l.Lk)("li",c,[(0,l.Lk)("a",{onClick:t[0]||(t[0]=(0,o.D$)((e=>h.goToPrePage(s.pages.current_page)),["prevent"])),class:(0,i.C4)([{"disabledPreNext disabled":1===s.pages.current_page},"page-link text-black bi bi-chevron-double-left mx-1"]),"aria-hidden":"true",href:"#"},null,2)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.pages.total_pages,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e,class:"page-item"},[(0,l.Lk)("a",{onClick:(0,o.D$)((t=>h.updatePage(e)),["prevent"]),class:(0,i.C4)([{"currentPageStyle disabled":e===s.pages.current_page},"page-link text-black mx-1"]),href:"#"},(0,i.v_)(e),11,a)])))),128)),(0,l.Lk)("li",d,[(0,l.Lk)("a",{onClick:t[1]||(t[1]=(0,o.D$)((e=>h.goToNextPage(s.pages.current_page)),["prevent"])),class:(0,i.C4)([{"disabledPreNext disabled":s.pages.current_page===s.pages.total_pages},"page-link text-black bi bi-chevron-double-right mx-1"]),href:"#"},null,2)])])])}var u={data(){return{}},props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)},goToPrePage(e){const t=e-1;this.$emit("emit-pages",t)},goToNextPage(e){const t=e+1;this.$emit("emit-pages",t)}}},h=s(1241);const g=(0,h.A)(u,[["render",p],["__scopeId","data-v-19377b96"]]);var m=g},4928:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return $}});var l=s(6768),o=s(4232);const i={key:1,class:"listContainer mx-auto d-flex flex-column justify-content-between col-12 col-xl-10"},r={key:0,class:"text-center"},n={key:0,class:"pt-4"},c={class:"fs-3 fw-bold"},a={key:1,class:"text-center mb-5"},d={key:0,class:"pt-4"},p={class:"accordion m-0",id:"accordionPanelsUserOrderList"},u={class:"accordion-header"},h=["data-bs-target","aria-controls"],g=["id"],m={class:"accordion-body pt-4"},f={class:"col-12 col-lg-3 col-xxl-2 ms-auto text-end px-3"},x=["onClick"];function _(e,t,s,_,k,L){const b=(0,l.g2)("LoadingView"),v=(0,l.g2)("OrderView"),y=(0,l.g2)("PaginationView");return k.isLoading?((0,l.uX)(),(0,l.Wv)(b,{key:0})):((0,l.uX)(),(0,l.CE)("main",i,[(0,l.Lk)("div",null,[L.noResults?((0,l.uX)(),(0,l.CE)("div",r,[k.searchContent?((0,l.uX)(),(0,l.CE)("h3",n," 共搜尋到 "+(0,o.v_)(k.orderList.length)+" 筆訂單 ",1)):(0,l.Q3)("",!0),(0,l.Lk)("p",c,(0,o.v_)(L.noResultsContent),1)])):((0,l.uX)(),(0,l.CE)("div",a,[k.searchContent?((0,l.uX)(),(0,l.CE)("h3",d," 共搜尋到 "+(0,o.v_)(k.orderList.length)+" 筆訂單 ",1)):(0,l.Q3)("",!0)])),(0,l.Lk)("section",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(k.orderList,((s,i)=>((0,l.uX)(),(0,l.CE)("div",{key:s.id,class:"accordion-item"},[(0,l.Lk)("h2",u,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.open&&e.open(...t)),class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":`#accordion-collapse-collapse${i}`,"aria-expanded":"true","aria-controls":`accordion-collapse-collapse${i}`}," 訂單日期 "+(0,o.v_)(L.turnDate(s.create_at)),9,h)]),(0,l.Lk)("div",{id:`accordion-collapse-collapse${i}`,class:(0,o.C4)(["accordion-collapse collapse",{show:1===s.num}])},[(0,l.Lk)("div",m,[(0,l.bF)(v,{oneOrder:s,class:"mb-3"},null,8,["oneOrder"]),(0,l.Lk)("div",f,[s.is_paid?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:e=>L.toPay(s.id),class:"w-100 btn btn-primary",type:"button"}," 確認付款 ",8,x))])])],10,g)])))),128))])]),(0,l.Lk)("footer",null,[L.pageSwitch?((0,l.uX)(),(0,l.Wv)(y,{key:0,pages:k.pagination,onEmitPages:L.getOrders},null,8,["pages","onEmitPages"])):(0,l.Q3)("",!0)])]))}var k=s(2896),L=s.n(k),b=s(3649),v=s(291),y={data(){return{isLoading:!1,orderList:{},pagination:{},searchContent:null}},inject:["emitter"],components:{OrderView:b.A,PaginationView:v.A},methods:{getOrders(e=1){this.orderList={},this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/orders?page=${e}`;this.$http.get(t).then((e=>{this.orderList={...e.data.orders},this.pagination=e.data.pagination})).catch((e=>{this.$pushMsg.status404(e.response,"取得訂單資料失敗")})).finally((()=>{this.isLoading=!1}))},toPay(e){const t=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/pay/${e}`;this.isLoading=!0,this.$http.post(t).then((()=>{this.$pushMsg.status200("付款成功"),this.getOrders()})).catch((e=>{this.$pushMsg.status404(e.response,"付款失敗")})).finally((()=>{this.isLoading=!1}))},turnDate(e){return new Date(1e3*e).toLocaleString("taiwan",{hour12:!1})}},computed:{noResults(){return 0===Object.values(this.orderList).length},noResultsContent(){let e="";return this.searchContent&&(e="查無此收件人姓名"),null===this.searchContent&&(e="無訂單"),e},pageSwitch(){return null===this.searchContent}},created(){this.getOrders(),this.emitter.on("orderSearchResult",(e=>{this.searchContent=e[0],this.orderList=[],this.orderList=e.data})),this.emitter.on("orderSearchNull",(()=>{this.getOrders(),this.searchContent=null}))},mounted(){const e=document.querySelectorAll(".collapse");this.orderList=[...e].map((e=>new(L())(e)))}},w=s(1241);const C=(0,w.A)(y,[["render",_],["__scopeId","data-v-2f1eddd6"]]);var $=C}}]);
//# sourceMappingURL=928.01d47d19.js.map