{"version":3,"file":"js/192.c933f25a.js","mappings":"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","sources":["webpack://fresh_box/./src/views/LoginView.vue","webpack://fresh_box/./src/views/LoginView.vue?5755","webpack://fresh_box/./node_modules/js-cookie/dist/js.cookie.mjs"],"sourcesContent":["<template>\n  <LoadingView v-if=\"isLoading\" />\n  <div v-else class=\"container col-sm-8 col-md-7 col-lg-5\">\n    <form @submit.prevent=\"signIn\" class=\"m-3\">\n      <h3 class=\"mb-3 pb-2 border-bottom border-gray-light\">請先登入</h3>\n      <div class=\"mb-3\">\n        <label for=\"inputEmail\">Email</label>\n        <input\n          v-model=\"user.username\"\n          type=\"email\"\n          id=\"inputEmail\"\n          class=\"form-control rounded-1\"\n          placeholder=\"name@example.com\"\n        />\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"inputPassword\">Password</label>\n        <input\n          v-model=\"user.password\"\n          type=\"password\"\n          id=\"inputPassword\"\n          class=\"form-control rounded-1\"\n          placeholder=\"Password\"\n        />\n      </div>\n      <div class=\"d-grid gap-2\">\n        <button class=\"btn btn-primary btn-block rounded-1\" type=\"submit\">\n          登入\n        </button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport Cookies from 'js-cookie'\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      user: {\n        username: '',\n        password: '',\n      },\n    }\n  },\n  inject: ['emitter'],\n  methods: {\n    signIn() {\n      const api = `${process.env.VUE_APP_API}v2/admin/signin`\n      this.$http\n        .post(api, this.user)\n        .then((res) => {\n          this.$pushMsg.status200('登入成功')\n          const token = res.data.token\n          const expired = new Date(res.data.expired)\n          Cookies.set('freshBoxToken', token, { expires: expired })\n          this.$router.push('/dashboard/admin-products')\n        })\n        .catch((error) => {\n          this.$pushMsg.status404(error.response, '登入失敗')\n        })\n    },\n    checkSignIn() {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_API}v2/api/user/check`\n      this.$http\n        .post(api)\n        .then(() => {\n          this.$router.push('/dashboard/admin-products')\n        })\n        .catch((error) => {\n          this.$pushMsg.status404(error.response, error.response.data.message)\n        })\n        .finally(() => {\n          this.isLoading = false\n        })\n    },\n  },\n  created() {\n    this.checkSignIn()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  margin-top: 150px;\n}\n</style>\n","import { render } from \"./LoginView.vue?vue&type=template&id=481a9aa8&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=481a9aa8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-481a9aa8\"]])\n\nexport default __exports__","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n"],"names":["key","class","_createElementVNode","for","type","$data","isLoading","_createBlock","_component_LoadingView","_createElementBlock","_hoisted_1","onSubmit","_cache","_withModifiers","args","$options","signIn","_hoisted_2","_hoisted_3","_hoisted_4","$event","user","username","id","placeholder","_hoisted_5","_hoisted_6","password","_hoisted_7","data","inject","methods","api","this","$http","post","then","res","$pushMsg","status200","token","expired","Date","Cookies","set","expires","$router","push","catch","error","status404","response","checkSignIn","message","finally","created","__exports__","render","assign","target","i","arguments","length","source","defaultConverter","read","value","slice","replace","decodeURIComponent","write","encodeURIComponent","init","converter","defaultAttributes","name","attributes","document","now","toUTCString","escape","stringifiedAttributes","attributeName","split","cookie","get","cookies","jar","parts","join","found","e","Object","create","remove","withAttributes","withConverter","freeze","path"],"sourceRoot":""}