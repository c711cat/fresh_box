"use strict";(self["webpackChunkfresh_box"]=self["webpackChunkfresh_box"]||[]).push([[292],{6292:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var r=a(6768);const s={class:"userViewContainer"};function o(e,t,a,o,i,c){const n=(0,r.g2)("UserNavbar"),l=(0,r.g2)("router-view"),d=(0,r.g2)("FooterView");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",null,[(0,r.bF)(n,{currentPath:e.$route.path},null,8,["currentPath"]),(0,r.bF)(l)]),(0,r.Lk)("div",null,[(0,r.bF)(d)])])}var i=a(4232),c=a(5130);const n=e=>((0,r.Qi)("data-v-68e2ffd0"),e=e(),(0,r.jt)(),e),l={class:"navbar navbar-expand-lg bg-black fixed-top"},d={class:"d-flex justify-content-between align-items-center flex-wrap col-12 px-3"},u=n((()=>(0,r.Lk)("span",{class:"logoText text-center text-primary px-1 fs-3"}," FRESH BOX ",-1))),h={ref:"menu",class:"offcanvas offcanvas-end bg-black",tabindex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel","data-bs-backdrop":"true","data-bs-scroll":"true"},p={class:"offcanvas-header px-4"},b={class:"navbar-nav flex-grow-1"},f={class:"d-flex justify-content-end align-items-center col"},v={class:"d-flex align-items-center searchContainer"},g=["disabled"],k=n((()=>(0,r.Lk)("button",{class:"d-none d-sm-block btn btn-outline-primary bi bi-search bg-black fs-4 searchBtn border border-0",type:"button"},null,-1))),m={class:"d-block d-sm-none d-flex align-items-center"},x={class:"mobileInputBox px-3 offcanvas offcanvas-top bg-black align-items-center justify-content-center",id:"mobile","data-bs-scroll":"true","data-bs-backdrop":"true",tabindex:"-1","aria-labelledby":"mobileLabel"},C={key:0,class:"d-block d-sm-none w-100 mobileInputWrap"},y=["disabled"],S=n((()=>(0,r.Lk)("i",{class:"bi bi-search mobileSearchIcon"},null,-1))),L={key:1,class:"d-block d-sm-none w-100 mobileInputWrap"},P=n((()=>(0,r.Lk)("i",{class:"bi bi-search mobileSearchIcon"},null,-1))),_=n((()=>(0,r.Lk)("button",{type:"button",class:"d-block d-sm-none btn btn-outline-primary bi bi-search bg-black fs-4 searchBtn border border-0","data-bs-toggle":"offcanvas","data-bs-target":"#mobile","aria-controls":"mobile"},null,-1))),T={class:"h-auto position-relative"},O=n((()=>(0,r.Lk)("i",{class:"bi bi-cart2 fs-2 text-primary"},null,-1))),F={key:0,class:"badge rounded-5 numInCart"},I=n((()=>(0,r.Lk)("i",{class:"bi bi-list fs-2 px-1 text-primary"},null,-1))),w=[I];function W(e,t,a,s,o,n){const I=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",l,[(0,r.Lk)("div",d,[(0,r.bF)(I,{to:"/",class:"navbar-brand text-center m-0"},{default:(0,r.k6)((()=>[u])),_:1}),(0,r.Lk)("div",h,[(0,r.Lk)("div",p,[(0,r.bF)(I,{onClick:t[0]||(t[0]=()=>n.closeMenu()),to:"/",class:"ps-2 offcanvas-title logoText text-decoration-none fs-3 text-primary",id:"offcanvasNavbarLabel"},{default:(0,r.k6)((()=>[(0,r.eW)(" FRESH BOX ")])),_:1}),(0,r.Lk)("button",{onClick:t[1]||(t[1]=()=>n.closeMenu()),type:"button",class:"bi bi-x-lg btn btn-outline-primary border-0 btn-lg","data-bs-dismiss":"offcanvas","aria-label":"Close"})]),(0,r.Lk)("div",{class:(0,i.C4)(["offcanvas-body",o.currentWidth<992?"":"px-4"])},[(0,r.Lk)("ul",b,[(0,r.Lk)("li",{class:(0,i.C4)(["nav-item rounded p-0",n.isMoileOrPc])},[(0,r.bF)(I,{onClick:n.goToUserProducts,to:"/user-products",class:(0,i.C4)(["nav-link text-primary py-2 px-3 rounded",n.isCurrentPage("/user-products")])},{default:(0,r.k6)((()=>[(0,r.eW)(" 所有產品 ")])),_:1},8,["onClick","class"])],2),(0,r.Lk)("li",{class:(0,i.C4)(["nav-item rounded p-0",n.isMoileOrPc])},[(0,r.bF)(I,{onClick:t[2]||(t[2]=()=>n.closeMenu()),to:"/favorite",class:(0,i.C4)(["nav-link text-primary py-2 px-3 rounded",n.isCurrentPage("/favorite")])},{default:(0,r.k6)((()=>[(0,r.eW)(" 收藏 ")])),_:1},8,["class"])],2),(0,r.Lk)("li",{class:(0,i.C4)(["nav-item rounded p-0",n.isMoileOrPc])},[(0,r.bF)(I,{onClick:t[3]||(t[3]=()=>n.closeMenu()),to:"/order-list",class:(0,i.C4)(["nav-link text-primary py-2 px-3 rounded",n.isCurrentPage("/order-list")])},{default:(0,r.k6)((()=>[(0,r.eW)(" 訂單 ")])),_:1},8,["class"])],2),(0,r.Lk)("li",{class:(0,i.C4)(["nav-item rounded p-0",n.isMoileOrPc])},[(0,r.bF)(I,{onClick:t[4]||(t[4]=()=>n.closeMenu()),to:"/QA",class:(0,i.C4)(["nav-link text-primary py-2 px-3 rounded",n.isCurrentPage("/QA")])},{default:(0,r.k6)((()=>[(0,r.eW)(" 常見問題 ")])),_:1},8,["class"])],2)])],2)],512),(0,r.Lk)("div",f,[(0,r.Lk)("section",v,["/order-list"===a.currentPath?(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:0,"onUpdate:modelValue":t[5]||(t[5]=e=>o.orderSearchText=e),disabled:n.disabledSearchInput,type:"search",class:"d-none d-sm-block form-control searchText",placeholder:"搜尋訂單者姓名","aria-label":"Search"},null,8,g)),[[c.Jo,o.orderSearchText]]):(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:1,"onUpdate:modelValue":t[6]||(t[6]=e=>o.productSearchText=e),type:"search",class:"d-none d-sm-block form-control searchText",placeholder:"搜尋產品名稱","aria-label":"PCSearch"},null,512)),[[c.Jo,o.productSearchText]]),k]),(0,r.Lk)("section",m,[(0,r.Lk)("div",x,["/order-list"===a.currentPath?((0,r.uX)(),(0,r.CE)("div",C,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.orderSearchText=e),disabled:n.disabledSearchInput,class:"border-0 form-control mobileInput",type:"search",placeholder:"搜尋訂單者姓名"},null,8,y),[[c.Jo,o.orderSearchText]]),S])):((0,r.uX)(),(0,r.CE)("div",L,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.productSearchText=e),class:"border-0 form-control mobileInput",type:"search",placeholder:"搜尋產品名稱"},null,512),[[c.Jo,o.productSearchText]]),P]))]),_]),(0,r.bF)(I,{to:"/cart",class:"nav-link px-2"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",null,[(0,r.Lk)("div",T,[O,o.carts.length>=1?((0,r.uX)(),(0,r.CE)("span",F,(0,i.v_)(o.carts.length),1)):(0,r.Q3)("",!0)])])])),_:1}),(0,r.Lk)("button",{onClick:t[9]||(t[9]=(...t)=>e.close&&e.close(...t)),class:"navbar-toggler border-0 col-auto m-0",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation"},w)])])])}a(4114);var M=a(8886),R=a.n(M),E={data(){return{userNavbar:{},productSearchText:"",orderSearchText:"",products:[],searchResult:[],orderSearchResult:[],carts:[],orders:[],pagination:{},orderPage:1,open:!1,currentWidth:"1000"}},inject:["emitter"],props:{currentPath:{}},watch:{productSearchText(){this.$router.push("/user-products"),setTimeout((()=>{""===this.productSearchText?this.emitter.emit("productSearchNull"):(this.products.forEach((e=>{e.title.match(this.productSearchText)&&this.searchResult.push(e)})),this.emitter.emit("productSearchResult",{data:this.searchResult,...this.productSearchText}),this.searchResult=[])}),1500)},orderSearchText(){this.orderSearchResult=[],""===this.orderSearchText?this.emitter.emit("orderSearchNull"):(this.orders.forEach((e=>{e.user.name.match(this.orderSearchText)&&this.orderSearchResult.push(e)})),this.emitter.emit("orderSearchResult",{data:this.orderSearchResult,...this.orderSearchText}),this.orderSearchResult=[])}},methods:{isCurrentPage(e){let t="";return this.currentPath===e&&this.currentWidth<992&&(t="isCurrentNavbarItem mobileBg"),this.currentPath===e&&this.currentWidth>=992&&(t="isCurrentNavbarItem"),t},closeMenu(){this.userNavbar.hide()},getProducts(){const e="https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/products/all";this.$http.get(e).then((e=>{this.products=e.data.products})).catch((e=>{this.$pushMsg.status404(e.response,"取得產品資料失敗")}))},getCart(){const e="https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/cart";this.$http.get(e).then((e=>{this.carts=e.data.data.carts})).catch((e=>{this.$pushMsg.status404(e.response,"取得購物車資料失敗")}))},goToUserProducts(){this.emitter.emit("goToUserProducts"),this.closeMenu()},getOrdersOfPage1(){const e=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/orders?page=${this.orderPage}`;this.$http.get(e).then((e=>{this.orders=e.data.orders,this.fetchOrdersOfOtherPages(e.data.pagination.total_pages)})).catch((e=>{this.$pushMsg.status404(e.response,"取得訂單資料失敗")}))},fetchOrdersOfOtherPages(e){if(this.orderPage=this.orderPage+1,this.orderPage<=e){const t=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/orders?page=${this.orderPage}`;this.$http.get(t).then((t=>{this.orders=[...this.orders,...t.data.orders],this.fetchOrdersOfOtherPages(e)})).catch((e=>{this.$pushMsg.status404(e.response,"取得訂單資料失敗")}))}},getCurrentWidth(){this.currentWidth=window.innerWidth}},computed:{isMoileOrPc(){return this.currentWidth<992?"isMobileItem":""},disabledSearchInput(){return this.pagination.current_page!==this.pagination.total_pages}},created(){this.getCurrentWidth(),this.getOrdersOfPage1(),this.getCart(),this.getProducts(),this.emitter.on("updateProductInCart",(()=>{this.getCart()})),this.emitter.on("clearCart",(()=>{this.getCart()}))},mounted(){this.userNavbar=new(R())(this.$refs.menu,{toggle:!1})}},N=a(1241);const $=(0,N.A)(E,[["render",W],["__scopeId","data-v-68e2ffd0"]]);var X=$;const U=e=>((0,r.Qi)("data-v-172e132a"),e=e(),(0,r.jt)(),e),B={class:"bg-light"},j={class:"px-3 py-4 border-bottom d-flex flex-wrap justify-content-between align-items-center"},V={class:"d-flex align-items-center ps-1 py-1 pe-1"},A=U((()=>(0,r.Lk)("a",{class:"bi bi-github fs-1 text-dark",href:"https://github.com/c711cat/fresh_box"},null,-1))),Q=(0,r.Fv)('<div class="px-3 py-4 d-flex flex-wrap" data-v-172e132a><div class="textStyle pe-2" data-v-172e132a><a class="linkStyle text-dark" target="_blank" href="https://icons8.com/icons/collections/x6c5ehv2qqdv25m8idkq" data-v-172e132a> Category </a> icons by <a class="linkStyle text-dark" target="_blank" href="https://icons8.com" data-v-172e132a> Icons8 </a> . </div><span class="pe-2" data-v-172e132a>此網站為個人作品展示，非商業用途。</span><span class="textStyle" data-v-172e132a>© 2024 FRESH BOX</span></div>',1);function H(e,t){const a=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("main",B,[(0,r.Lk)("div",j,[(0,r.bF)(a,{to:"/",class:"mb-0 ps-1 pe-3 textStyle linkStyle fs-4 text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)(" FRESH BOX ")])),_:1}),(0,r.Lk)("div",V,[(0,r.bF)(a,{to:"/login",class:"backendLink btn btn-black me-3 py-1"},{default:(0,r.k6)((()=>[(0,r.eW)(" 後台 ")])),_:1}),A])]),Q])}const J={},q=(0,N.A)(J,[["render",H],["__scopeId","data-v-172e132a"]]);var z=q,D={data(){return{}},components:{UserNavbar:X,FooterView:z}};const G=(0,N.A)(D,[["render",o],["__scopeId","data-v-522b9eda"]]);var K=G}}]);
//# sourceMappingURL=292.c30254bd.js.map