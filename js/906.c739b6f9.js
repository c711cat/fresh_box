"use strict";(self["webpackChunkfresh_box"]=self["webpackChunkfresh_box"]||[]).push([[906],{291:function(t,e,o){o.d(e,{A:function(){return h}});var l=o(6768),s=o(5130),a=o(4232);const i={class:"pt-3","aria-label":"Page navigation"},d={class:"pagination my-3 justify-content-center"},c={class:"page-item"},n=["onClick"],r={class:"page-item"};function u(t,e,o,u,p,m){return(0,l.uX)(),(0,l.CE)("nav",i,[(0,l.Lk)("ul",d,[(0,l.Lk)("li",c,[(0,l.Lk)("a",{onClick:e[0]||(e[0]=(0,s.D$)((t=>m.goToPrePage(o.pages.current_page)),["prevent"])),class:(0,a.C4)([{"disabledPreNext disabled":1===o.pages.current_page},"page-link text-black bi bi-chevron-double-left mx-1"]),"aria-hidden":"true",href:"#"},null,2)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.pages.total_pages,(t=>((0,l.uX)(),(0,l.CE)("li",{key:t,class:"page-item"},[(0,l.Lk)("a",{onClick:(0,s.D$)((e=>m.updatePage(t)),["prevent"]),class:(0,a.C4)([{"currentPageStyle disabled":t===o.pages.current_page},"page-link text-black mx-1"]),href:"#"},(0,a.v_)(t),11,n)])))),128)),(0,l.Lk)("li",r,[(0,l.Lk)("a",{onClick:e[1]||(e[1]=(0,s.D$)((t=>m.goToNextPage(o.pages.current_page)),["prevent"])),class:(0,a.C4)([{"disabledPreNext disabled":o.pages.current_page===o.pages.total_pages},"page-link text-black bi bi-chevron-double-right mx-1"]),href:"#"},null,2)])])])}var p={data(){return{}},props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)},goToPrePage(t){const e=t-1;this.$emit("emit-pages",e)},goToNextPage(t){const e=t+1;this.$emit("emit-pages",e)}}},m=o(1241);const g=(0,m.A)(p,[["render",u],["__scopeId","data-v-19377b96"]]);var h=g},8906:function(t,e,o){o.r(e),o.d(e,{default:function(){return Gt}});var l=o(6768),s=o(4232);const a=t=>((0,l.Qi)("data-v-0acc8a6e"),t=t(),(0,l.jt)(),t),i={key:1,class:"wrap px-3 d-flex flex-column align-items-center"},d={class:"row m-0 p-2 col-12 col-xxl-11 justify-content-between align-items-center"},c={key:0},n={key:1,class:"col-auto col-sm-6 m-0 p-1"},r={key:2,class:"col-auto p-1"},u={class:"position-relative text-center col-4 col-sm-6 col-md-3 col-lg-2"},p=["srcset"],m={key:0,class:"disabledContainer disabled position-absolute start-0 top-0"},g=a((()=>(0,l.Lk)("strong",null,"未 販 售",-1))),h=[g],b={class:"text-start col-8 col-sm-6 col-md-3 col-lg-3 col-xl-2"},k={class:"col-4 col-sm-3 col-md-2 col-lg-2"},f=a((()=>(0,l.Lk)("div",null,"原價",-1))),P={class:"col-4 col-sm-3 col-md-2 col-lg-2"},L=a((()=>(0,l.Lk)("div",null,"售價",-1))),v={class:"col-4 col-sm-3 col-md-2 col-lg-2 col-xl-1"},x=a((()=>(0,l.Lk)("div",null,"數量",-1))),y={key:0,class:"py-3 px-3 col-12 col-sm-3 col-md-3 col-lg-1 text-success text-end text-md-center"},C={key:1,class:"py-3 px-3 col-12 col-sm-3 col-md-3 col-lg-1 text-secondary text-end text-md-center"},_={class:"px-3 text-end col-12 col-md-9 col-lg-12 col-xl-2"},$=["onClick"],M=["onClick"];function E(t,e,o,a,g,E){const I=(0,l.g2)("LoadingView"),U=(0,l.g2)("router-link"),X=(0,l.g2)("PaginationView"),w=(0,l.g2)("ProductModal"),V=(0,l.g2)("DelModal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[g.isLoading?((0,l.uX)(),(0,l.Wv)(I,{key:0})):((0,l.uX)(),(0,l.CE)("main",i,[(0,l.Lk)("header",d,[E.noResults?((0,l.uX)(),(0,l.CE)("h3",c,"查無相關商品")):(0,l.Q3)("",!0),E.itemsInProducts?((0,l.uX)(),(0,l.CE)("h3",n," 後台產品列表 ")):(0,l.Q3)("",!0),E.itemsInProducts?((0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("button",{onClick:e[0]||(e[0]=t=>E.openModal(!0)),type:"button",class:"btn btn-primary"}," 新增產品 ")])):(0,l.Q3)("",!0)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.products,(e=>((0,l.uX)(),(0,l.CE)("section",{key:e.id,class:(0,s.C4)([{"bg-light":0===e.is_enabled},"row m-0 col-12 col-xxl-11 justify-content-center align-items-center py-2 border-top text-center text-sm-start"])},[(0,l.Lk)("div",u,[(0,l.bF)(U,{to:E.isPath(e)},{default:(0,l.k6)((()=>[(0,l.Lk)("img",{srcset:`${e.imageUrl}&w=500`,class:(0,s.C4)([{disabled:0===e.is_enabled,xsWidth:g.currentWidth<=450},"img-fluid linkStyle"])},null,10,p),0===e.is_enabled?((0,l.uX)(),(0,l.CE)("div",m,h)):(0,l.Q3)("",!0)])),_:2},1032,["to"])]),(0,l.Lk)("div",b,[(0,l.Lk)("div",null,(0,s.v_)(e.title),1),(0,l.Lk)("div",null,(0,s.v_)(e.content)+"／"+(0,s.v_)(e.unit),1)]),(0,l.Lk)("div",k,[f,(0,l.Lk)("div",null,"NT$ "+(0,s.v_)(t.$filters.currency(e.origin_price)),1)]),(0,l.Lk)("div",P,[L,(0,l.Lk)("div",null,"NT$ "+(0,s.v_)(t.$filters.currency(e.price)),1)]),(0,l.Lk)("div",v,[x,(0,l.Lk)("div",null,(0,s.v_)(e.qty)+" "+(0,s.v_)(e.unit),1)]),e.is_enabled?((0,l.uX)(),(0,l.CE)("div",y," 販售中 ")):((0,l.uX)(),(0,l.CE)("div",C," 未販售 ")),(0,l.Lk)("div",_,[(0,l.Lk)("button",{onClick:t=>E.openModal(!1,e),type:"button",class:"btn btn-outline-dark-primary rounded-1 me-1 my-1"}," 編輯 ",8,$),(0,l.Lk)("button",{onClick:t=>E.openDelModal(e),type:"button",class:"btn btn-outline-danger rounded-1 my-1"}," 刪除 ",8,M)])],2)))),128)),g.openPagination?((0,l.uX)(),(0,l.Wv)(X,{key:0,pages:g.pagination,onEmitPages:E.getProducts},null,8,["pages","onEmitPages"])):(0,l.Q3)("",!0)])),(0,l.bF)(w,{ref:"productModal",product:g.tempProduct,onEditProduct:E.editProduct,onAddProduct:E.addProduct,pages:g.pagination},null,8,["product","onEditProduct","onAddProduct","pages"]),(0,l.bF)(V,{ref:"delModal",product:g.tempProduct,onDelProduct:E.delProduct,pages:g.pagination},null,8,["product","onDelProduct","pages"])],64)}var I=o(5130);const U=t=>((0,l.Qi)("data-v-796259f8"),t=t(),(0,l.jt)(),t),X={ref:"Modal",class:"modal fade",id:"admin'sProductModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},w={class:"modal-dialog modal-xl"},V={class:"modal-content"},F={class:"modal-header"},D={key:0,class:"modal-title"},N={key:1,class:"modal-title"},J=U((()=>(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),T={class:"modal-body"},A={class:"row g-3"},W={class:"col-lg-4 row g-3 mx-0 flex-column"},Q={class:"col-12"},j=U((()=>(0,l.Lk)("label",{for:"inputUrl",class:"form-label"}," 輸入封面圖片網址 ",-1))),K={class:"input-group"},S={class:"col-12"},q=U((()=>(0,l.Lk)("label",{for:"customFile",class:"form-label"},"或 上傳封面圖片檔案 ",-1))),R={class:"col-12 mb-1"},B=["srcset"],H={key:0,class:"col-12"},O=U((()=>(0,l.Lk)("label",{for:"inputUrl",class:"form-label"}," 輸入其他圖片網址 ",-1))),z={class:"input-group mb-3"},G=["onUpdate:modelValue"],Y=["onClick"],Z={class:"col-12"},tt=U((()=>(0,l.Lk)("label",{for:"customFile",class:"form-label"},"或 上傳其他圖片檔案 ",-1))),et=["src"],ot={class:"mt-2"},lt={class:"rightContainer col-lg-8 row g-3 mx-0"},st={class:"col-lg-6 col-xl-4"},at=U((()=>(0,l.Lk)("div",{class:"d-inline text-danger"},"＊",-1))),it=U((()=>(0,l.Lk)("label",{for:"name",class:"form-label"},"產品名稱",-1))),dt={class:"col-lg-6 col-xl-3"},ct=U((()=>(0,l.Lk)("div",{class:"d-inline text-danger"},"＊",-1))),nt=U((()=>(0,l.Lk)("label",{for:"category",class:"form-label"},"類別",-1))),rt={class:"col-xl-5"},ut=U((()=>(0,l.Lk)("label",{for:"category",class:"form-label"},"保存方式",-1))),pt={class:"col-lg-6 col-xl-3"},mt=U((()=>(0,l.Lk)("label",{for:"unit_description",class:"form-label"},"產地",-1))),gt={class:"col-lg-6 col-xl-4"},ht=U((()=>(0,l.Lk)("label",{for:"unit_description",class:"form-label"},"重量規格",-1))),bt={class:"col-lg-6 col-xl-2"},kt=U((()=>(0,l.Lk)("div",{class:"d-inline text-danger"},"＊",-1))),ft=U((()=>(0,l.Lk)("label",{for:"unit",class:"form-label"},"單位",-1))),Pt={class:"col-lg-6 col-xl-3"},Lt=U((()=>(0,l.Lk)("label",{for:"number",class:"form-label"},"數量",-1))),vt={class:"col-lg-6"},xt=U((()=>(0,l.Lk)("div",{class:"d-inline text-danger"},"＊",-1))),yt=U((()=>(0,l.Lk)("label",{for:"origin_price",class:"form-label"},"原價",-1))),Ct={class:"col-lg-6"},_t=U((()=>(0,l.Lk)("div",{class:"d-inline text-danger"},"＊",-1))),$t=U((()=>(0,l.Lk)("label",{for:"price",class:"form-label"},"售價",-1))),Mt={class:"col-lg-12 mb-3"},Et={for:"detailed_description",class:"form-label"},It={class:"input-group"},Ut=["onUpdate:modelValue"],Xt=["onClick"],wt={class:"col-lg-12"},Vt={for:"detailed_notes",class:"form-label"},Ft={class:"input-group"},Dt=["onUpdate:modelValue"],Nt=["onClick"],Jt={class:"col-lg-12 form-check mx-1"},Tt=U((()=>(0,l.Lk)("label",{class:"form-check-label",for:"is_enabled"}," 販售 ",-1))),At={class:"modal-footer"},Wt=U((()=>(0,l.Lk)("button",{type:"button",class:"btn btn-outline-dark","data-bs-dismiss":"modal"}," 取消 ",-1)));function Qt(t,e,o,a,i,d){const c=(0,l.g2)("v-select");return(0,l.uX)(),(0,l.CE)("div",X,[(0,l.Lk)("div",w,[(0,l.Lk)("div",V,[(0,l.Lk)("header",F,[i.tempProduct.id?((0,l.uX)(),(0,l.CE)("h5",D,"編輯產品")):((0,l.uX)(),(0,l.CE)("h5",N,"新增產品")),J]),(0,l.Lk)("main",T,[(0,l.Lk)("form",A,[(0,l.Lk)("div",W,[(0,l.Lk)("section",Q,[j,(0,l.Lk)("div",K,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.tempProduct.imageUrl=t),type:"url",class:"form-control",id:"inputUrl",placeholder:"請輸入連結"},null,512),[[I.Jo,i.tempProduct.imageUrl]]),(0,l.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>d.delCoverImg&&d.delCoverImg(...t)),type:"button",class:"btn btn-outline-danger"}," 移除 ")])]),(0,l.Lk)("section",S,[q,(0,l.Lk)("input",{onChange:e[2]||(e[2]=(...t)=>d.uploadFile&&d.uploadFile(...t)),ref:"fileInput",type:"file",id:"customFile",class:"form-control mb-3"},null,544),(0,l.Lk)("div",R,[(0,l.Lk)("img",{class:"img-fluid",srcset:`${i.tempProduct.imageUrl}&w=500`,alt:""},null,8,B)])]),i.tempProduct.images?((0,l.uX)(),(0,l.CE)("section",H,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.tempProduct.images,((t,o)=>((0,l.uX)(),(0,l.CE)("div",{key:t+o,class:"border-top pt-2"},[O,(0,l.Lk)("div",z,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>i.tempProduct.images[o]=t,type:"url",class:"form-control",id:"inputUrl",placeholder:"請輸入連結"},null,8,G),[[I.Jo,i.tempProduct.images[o]]]),(0,l.Lk)("button",{onClick:t=>d.delImg(o),type:"button",class:"btn btn-outline-danger"}," 移除 ",8,Y)]),(0,l.Lk)("div",Z,[tt,(0,l.Lk)("input",{onChange:e[3]||(e[3]=(...t)=>d.uploadMultipleImgs&&d.uploadMultipleImgs(...t)),ref_for:!0,ref:o,type:"file",id:"customFile",class:"form-control mb-3"},null,544),(0,l.Lk)("img",{class:"img-fluid mb-3",src:`${i.tempProduct.images[o]}&w=500`,alt:""},null,8,et)])])))),128))])):(0,l.Q3)("",!0),(0,l.Lk)("div",ot,[(0,l.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>d.addImg&&d.addImg(...t)),class:"btn btn-outline-dark-primary btn-sm w-100",type:"button"}," 新增其他圖片 ")])]),(0,l.Lk)("section",lt,[(0,l.Lk)("div",st,[at,it,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.tempProduct.title=t),type:"text",class:"form-control",id:"name"},null,512),[[I.Jo,i.tempProduct.title]])]),(0,l.Lk)("div",dt,[ct,nt,(0,l.bF)(c,{modelValue:i.tempProduct.category,"onUpdate:modelValue":e[6]||(e[6]=t=>i.tempProduct.category=t),label:"Select",options:i.options},null,8,["modelValue","options"])]),(0,l.Lk)("div",rt,[ut,(0,l.bF)(c,{modelValue:i.tempProduct.preservation_methods,"onUpdate:modelValue":e[7]||(e[7]=t=>i.tempProduct.preservation_methods=t),label:"Select",options:i.preservationMethods},null,8,["modelValue","options"])]),(0,l.Lk)("div",pt,[mt,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>i.tempProduct.origin_place=t),type:"text",class:"form-control",id:"unit_description",placeholder:"例如：台灣"},null,512),[[I.Jo,i.tempProduct.origin_place]])]),(0,l.Lk)("div",gt,[ht,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>i.tempProduct.content=t),type:"text",class:"form-control",id:"unit_description",placeholder:"例如：600g±5%"},null,512),[[I.Jo,i.tempProduct.content]])]),(0,l.Lk)("div",bt,[kt,ft,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>i.tempProduct.unit=t),type:"text",class:"form-control",id:"unit",placeholder:"例如：份"},null,512),[[I.Jo,i.tempProduct.unit]])]),(0,l.Lk)("div",Pt,[Lt,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>i.tempProduct.qty=t),min:"0",type:"number",class:"form-control",id:"number",placeholder:"例如：10"},null,512),[[I.Jo,i.tempProduct.qty]])]),(0,l.Lk)("div",vt,[xt,yt,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>i.tempProduct.origin_price=t),type:"text",class:"form-control",id:"origin_price",placeholder:"例如：300"},null,512),[[I.Jo,i.tempProduct.origin_price,void 0,{number:!0}]])]),(0,l.Lk)("div",Ct,[_t,$t,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>i.tempProduct.price=t),type:"text",class:"form-control",id:"price",placeholder:"例如：250"},null,512),[[I.Jo,i.tempProduct.price,void 0,{number:!0}]])]),(0,l.Lk)("div",Mt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.tempProduct.description,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"mb-2"},[(0,l.Lk)("label",Et," 產品介紹 "+(0,s.v_)(e+1),1),(0,l.Lk)("div",It,[(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t=>i.tempProduct.description[e]=t,type:"text",class:"form-control",id:"detailed_description"},"\n                    ",8,Ut),[[I.Jo,i.tempProduct.description[e]]]),(0,l.Lk)("button",{onClick:t=>d.delDescriptionItem(e),type:"button",class:"btn btn-outline-danger"}," 移除 ",8,Xt)])])))),128)),(0,l.Lk)("button",{onClick:e[14]||(e[14]=(...t)=>d.addDescriptions&&d.addDescriptions(...t)),class:"btn btn-outline-dark-primary btn-sm mt-2",type:"button"}," 新增產品介紹 ")]),(0,l.Lk)("div",wt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.tempProduct.notes,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"mb-2"},[(0,l.Lk)("label",Vt," 注意事項 "+(0,s.v_)(e+1),1),(0,l.Lk)("div",Ft,[(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t=>i.tempProduct.notes[e]=t,type:"text",class:"form-control",id:"detailed_notes"},"\n                    ",8,Dt),[[I.Jo,i.tempProduct.notes[e]]]),(0,l.Lk)("button",{onClick:t=>d.delNotesItem(e),type:"button",class:"btn btn-outline-danger"}," 移除 ",8,Nt)])])))),128)),(0,l.Lk)("button",{onClick:e[15]||(e[15]=(...t)=>d.addNotes&&d.addNotes(...t)),class:"btn btn-outline-dark-primary btn-sm mt-2",type:"button"}," 新增注意事項 ")]),(0,l.Lk)("div",Jt,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>i.tempProduct.is_enabled=t),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},null,512),[[I.lH,i.tempProduct.is_enabled]]),Tt])])])]),(0,l.Lk)("footer",At,[Wt,i.tempProduct.id?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:e[17]||(e[17]=e=>t.$emit("edit-product",i.tempProduct,o.pages.current_page)),type:"button",class:"btn btn-primary"}," 更新產品 ")):((0,l.uX)(),(0,l.CE)("button",{key:1,onClick:e[18]||(e[18]=e=>t.$emit("add-product",i.tempProduct)),type:"button",class:"btn btn-primary"}," 新增產品 "))])])])],512)}o(4114);var jt=o(3286),Kt={data(){return{modal:{},tempProduct:{description:[""],notes:[""]},options:["水果","葉菜","菇菌","辛香料","瓜果根球莖"],preservationMethods:["冷藏","室溫陰涼乾燥處","冷藏或冷凍","室溫陰涼乾燥處、冷藏或冷凍"]}},props:{product:{type:Object,default(){return{}}},pages:{}},watch:{product(){this.tempProduct=this.product}},methods:{uploadFile(){const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",t);const o="https://vue3-course-api.hexschool.io/api/fresh_box-api/admin/upload";this.$http.post(o,e).then((t=>{this.tempProduct.imageUrl=t.data.imageUrl})).catch((t=>{this.$pushMsg.status404(t.response.data.message)}))},uploadMultipleImgs(){const t=this.tempProduct.images.length-1,e=this.$refs[t][0].files[0],o=new FormData;o.append("file-to-upload",e);const l="https://vue3-course-api.hexschool.io/api/fresh_box-api/admin/upload";this.$http.post(l,o).then((e=>{this.tempProduct.images[t]=e.data.imageUrl})).catch((t=>{this.$pushMsg.status404(t.response.data.message)}))},delCoverImg(){this.tempProduct.imageUrl="",this.$refs.fileInput.value=""},delImg(t){this.tempProduct.images.splice(t,1)},addImg(){this.tempProduct.images||(this.tempProduct.images=[]),this.tempProduct.images.push("")},addNotes(){this.tempProduct.notes||(this.tempProduct.notes=[]),this.tempProduct.notes.push("")},addDescriptions(){this.tempProduct.description||(this.tempProduct.description=[]),this.tempProduct.description.push("")},delDescriptionItem(t){this.tempProduct.description.splice(t,1)},delNotesItem(t){this.tempProduct.notes.splice(t,1)}},mixins:[jt.A]},St=o(1241);const qt=(0,St.A)(Kt,[["render",Qt],["__scopeId","data-v-796259f8"]]);var Rt=qt,Bt=o(3985),Ht=o(291),Ot={data(){return{products:[],tempProduct:{is_enabled:0},isNew:!1,isLoading:!1,pagination:{},openPagination:!0,searchText:null,currentWidth:1e3}},components:{ProductModal:Rt,DelModal:Bt.A,PaginationView:Ht.A},inject:["emitter"],methods:{getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/admin/products/?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.pagination=t.data.pagination,this.products=t.data.products,this.openPagination=!0})).catch((t=>{this.$pushMsg.status404(t.response,"取得產品資料失敗")})).finally((()=>{this.isLoading=!1}))},openModal(t,e){this.tempProduct=t?{description:[""],notes:[""],is_enabled:0}:{...e},this.isNew=t,this.$refs.productModal.showModal()},addProduct(t){this.tempProduct=t;const e="https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/admin/product";this.isLoading=!0,this.$http.post(e,{data:this.tempProduct}).then((()=>{this.getProducts(),this.$refs.productModal.hideModal(),this.$pushMsg.status200("新增產品成功")})).catch((t=>{this.$pushMsg.status404(t.response,"新增產品失敗")})).finally((()=>{this.isLoading=!1}))},editProduct(t,e){this.tempProduct=t;const o=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/admin/product/${t.id}`;this.isLoading=!0,this.$http.put(o,{data:this.tempProduct}).then((()=>{this.getProducts(e),this.$refs.productModal.hideModal(),this.$pushMsg.status200("更新產品成功")})).catch((t=>{this.$pushMsg.status404(t.response,"更新產品失敗")})).finally((()=>{this.isLoading=!1}))},openDelModal(t){this.$refs.delModal.showModal(),this.tempProduct={...t}},delProduct(t,e){const o=`https://vue3-course-api.hexschool.io/v2/api/fresh_box-api/admin/product/${t.id}`;this.isLoading=!0,this.$http.delete(o).then((()=>{this.getProducts(e),this.$refs.delModal.hideModal(),this.$pushMsg.status200("已刪除產品")})).catch((t=>{this.$pushMsg.status404(t.response,"刪除失敗")})).finally((()=>{this.isLoading=!1}))},isPath(t){return 0===t.is_enabled?"/dashboard/admin-products":`/product/${t.id}`},getCurrentWidth(){this.currentWidth=window.outerWidth}},computed:{noResults(){return null!==this.searchText&&0===this.products.length},itemsInProducts(){return this.products.length>=1}},created(){this.getCurrentWidth(),this.getProducts(),this.emitter.on("adminSearchProductNull",(()=>{this.searchText=null,this.getProducts()})),this.emitter.on("adminSearchProductResult",(t=>{this.products=t.data,this.searchText=t.data2,this.openPagination=!1}))}};const zt=(0,St.A)(Ot,[["render",E],["__scopeId","data-v-0acc8a6e"]]);var Gt=zt}}]);
//# sourceMappingURL=906.c739b6f9.js.map