"use strict";(self["webpackChunkfresh_box"]=self["webpackChunkfresh_box"]||[]).push([[192],{9192:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(6768),s=n(5130);const o=e=>((0,r.Qi)("data-v-481a9aa8"),e=e(),(0,r.jt)(),e),i={key:1,class:"container col-sm-8 col-md-7 col-lg-5"},a=o((()=>(0,r.Lk)("h3",{class:"mb-3 pb-2 border-bottom border-gray-light"},"請先登入",-1))),c={class:"mb-3"},u=o((()=>(0,r.Lk)("label",{for:"inputEmail"},"Email",-1))),d={class:"mb-3"},p=o((()=>(0,r.Lk)("label",{for:"inputPassword"},"Password",-1))),l=o((()=>(0,r.Lk)("div",{class:"d-grid gap-2"},[(0,r.Lk)("button",{class:"btn btn-primary btn-block rounded-1",type:"submit"}," 登入 ")],-1)));function h(e,t,n,o,h,m){const f=(0,r.g2)("LoadingView");return h.isLoading?((0,r.uX)(),(0,r.Wv)(f,{key:0})):((0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>m.signIn&&m.signIn(...e)),["prevent"])),class:"m-3"},[a,(0,r.Lk)("div",c,[u,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>h.user.username=e),type:"email",id:"inputEmail",class:"form-control rounded-1",placeholder:"name@example.com"},null,512),[[s.Jo,h.user.username]])]),(0,r.Lk)("div",d,[p,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>h.user.password=e),type:"password",id:"inputPassword",class:"form-control rounded-1",placeholder:"Password"},null,512),[[s.Jo,h.user.password]])]),l],32)]))}n(4114);var m=n(8704),f={data(){return{isLoading:!1,user:{username:"",password:""}}},inject:["emitter"],methods:{signIn(){const e="https://vue3-course-api.hexschool.io/v2/admin/signin";this.$http.post(e,this.user).then((e=>{this.$pushMsg.status200("登入成功");const t=e.data.token,n=new Date(e.data.expired);m.A.set("freshBoxToken",t,{expires:n}),this.$router.push("/dashboard/admin-products")})).catch((e=>{this.$pushMsg.status404(e.response,"登入失敗")}))},checkSignIn(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(e).then((()=>{this.$router.push("/dashboard/admin-products")})).catch((e=>{this.$pushMsg.status404(e.response,e.response.data.message)})).finally((()=>{this.isLoading=!1}))}},created(){this.checkSignIn()}},b=n(1241);const v=(0,b.A)(f,[["render",h],["__scopeId","data-v-481a9aa8"]]);var g=v},8704:function(e,t,n){
/*! js-cookie v3.0.5 | MIT */
function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{A:function(){return i}});var s={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function o(e,t){function n(n,s,o){if("undefined"!==typeof document){o=r({},t,o),"number"===typeof o.expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=n+"="+e.write(s,n)+i}}function s(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},s=0;s<n.length;s++){var o=n[s].split("="),i=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=e.read(i,a),t===a)break}catch(c){}}return t?r[t]:r}}return Object.create({set:n,get:s,remove:function(e,t){n(e,"",r({},t,{expires:-1}))},withAttributes:function(e){return o(this.converter,r({},this.attributes,e))},withConverter:function(e){return o(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var i=o(s,{path:"/"})}}]);
//# sourceMappingURL=192.c933f25a.js.map